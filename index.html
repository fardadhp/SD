<head>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/4.1.2/papaparse.js"></script>
</head>

<body>
  <div id="graph"><!-- Plotly chart will be drawn inside this DIV --></div>
</body>

<script>
  $.ajax({
    type: "GET",
    url: "https://raw.githubusercontent.com/fardadhp/SD/master/FlowTime.csv",
    success: function (data) {
      yval=Papa.parse(data).data;
      f1=yval[1];f1=f1.slice(0, 4307);
      f2=yval[2];f2=f2.slice(0, 4324);
      f3=yval[3];f3=f3.slice(0, 5743);
      f4=yval[4];f4=f4.slice(0, 6495);
      f5=yval[5];f5=f5.slice(0, 6846);
      f6=yval[6];f6=f6.slice(0, 7080);
      t1=yval[7];t1=t1.slice(0, 4307);
      t2=yval[8];t2=t2.slice(0, 4324);
      t3=yval[9];t3=t3.slice(0, 5743);
      t4=yval[10];t4=t4.slice(0, 6495);
      t5=yval[11];t5=t5.slice(0, 6846);
      t6=yval[12];t6=t6.slice(0, 7080);

      //y1=data;
      //document.writeln(f6);
      //$('body').append(arrayToTable(data)); 


Plotly.plot('graph', {
  data: [{
    x: t1,
    y: f1,
    line: {
      color: 'red',
      simplify: false,
    }
  }],
  layout: {
    width: 750,
    height: 500,
    xaxis: {
        range: [0, 75],
        autorange: false,
        title: 'Time (sec)'
    },
    yaxis: {
        range: [0, 60],
        autorange: false,
        title: '# evacuees left'        
    },
    sliders: [{
      pad: {t: 75},
      x: 0.25,
      len: 0.5,
      currentvalue: {
        xanchor: 'right',
        prefix: 'Relaxation Time (sec): ',
        font: {
          color: '#888',
          size: 20
        }
      },
      transition: {duration: 500},
      // By default, animate commands are bound to the most recently animated frame:
      steps: [{
        label: '0.01',
        method: 'animate',
        args: [['0.01'], {
          mode: 'immediate',
          frame: {redraw: false, duration: 500},
          transition: {duration: 500}
        }]
      }, {
        label: '0.25',
        method: 'animate',
        args: [['0.25'], {
          mode: 'immediate',
          frame: {redraw: false, duration: 500},
          transition: {duration: 500}
        }]
        }, {
        label: '0.50',
        method: 'animate',
        args: [['0.50'], {
          mode: 'immediate',
          frame: {redraw: false, duration: 500},
          transition: {duration: 500}
        }]
        }, {
        label: '0.75',
        method: 'animate',
        args: [['0.75'], {
          mode: 'immediate',
          frame: {redraw: false, duration: 500},
          transition: {duration: 500}
        }]
      }, {
        label: '1.00',
        method: 'animate',
        args: [['1.00'], {
          mode: 'immediate',
          frame: {redraw: false, duration: 500},
          transition: {duration: 500}
        }]
      }]
    }],
    updatemenus: [{
      type: 'buttons',
      showactive: false,
      x: 0.05,
      y: 0,
      xanchor: 'right',
      yanchor: 'top',
      pad: {t: 60, r: 20},
      buttons: [{
        label: 'Play',
        method: 'animate',
        args: [null, {
          fromcurrent: true,
          frame: {redraw: false, duration: 1000},
          transition: {duration: 500}
        }]
      }]
    }]
  },
  // The slider itself does not contain any notion of timing, so animating a slider
  // must be accomplished through a sequence of frames. Here we'll change the color
  // and the data of a single trace:
  frames: [{
    name: '0.01',
    data: [{
    x: t1,
    y: f1,
    }]
  }, {
    name: '0.25',
    data: [{
    x: t3,
    y: f3,
    }]
  }, {
    name: '0.50',
    data: [{
    x: t4,
    y: f4,
    }]
  }, {
    name: '0.75',
    data: [{
    x: t5,
    y: f5,
    }]
  }, {
    name: '1.00',
    data: [{
    x: t6,
    y: f6,
    }]
  }]
});

}
  });

</script>
